# ğŸš€ Antigravity Workflow Framework (AWF) v2.0

**Há»‡ thá»‘ng Workflow TOÃ€N DIá»†N cho má»i trÃ¬nh Ä‘á»™** - Tá»« newbie Ä‘áº¿n pro, AI Ä‘á»u lo Ä‘Æ°á»£c.

> ğŸ’¡ **Triáº¿t lÃ½ AWF 2.0:**
> - AI Äá»€ XUáº¤T, Báº¡n DUYá»†T (Smart Proposal)
> - Má»—i workflow cÃ³ PERSONA riÃªng (PM, Developer, Designer, Detective...)
> - KHÃ”NG BAO GIá»œ máº¥t context (Lazy Checkpoint + Proactive Handover)

---

## ğŸ“‹ Danh sÃ¡ch lá»‡nh (16 Workflows)

### ğŸŒŸ Khá»Ÿi Ä‘á»™ng & Ngá»¯ cáº£nh
| Lá»‡nh | MÃ´ táº£ | Äiá»ƒm mÃ¹ Ä‘Æ°á»£c xá»­ lÃ½ |
|------|-------|-------------------|
| `/init` | Táº¡o dá»± Ã¡n má»›i hoÃ n chá»‰nh | Env vars, Git, Code quality tools |
| `/recap` | TÃ³m táº¯t context khi quay láº¡i | Context recovery |
| `/save-brain` | LÆ°u kiáº¿n thá»©c cuá»‘i buá»•i | API Docs, Changelog, Business rules |

### ğŸ¯ PhÃ¡t triá»ƒn tÃ­nh nÄƒng
| Lá»‡nh | MÃ´ táº£ | Äiá»ƒm mÃ¹ Ä‘Æ°á»£c xá»­ lÃ½ |
|------|-------|-------------------|
| `/plan` | Thiáº¿t káº¿ tÃ­nh nÄƒng (Smart Proposal) | Auth, DB, Charts, Scheduled Tasks |
| `/design` | **Thiáº¿t káº¿ chi tiáº¿t** â­ NEW | Database, Luá»“ng hoáº¡t Ä‘á»™ng, Acceptance Criteria |
| `/visualize` | Thiáº¿t káº¿ UI/UX Ä‘áº¹p | Loading/Error states, Accessibility |
| `/code` | Viáº¿t code cháº¥t lÆ°á»£ng | Security, Validation, Error handling |

### âš™ï¸ Váº­n hÃ nh
| Lá»‡nh | MÃ´ táº£ | Äiá»ƒm mÃ¹ Ä‘Æ°á»£c xá»­ lÃ½ |
|------|-------|-------------------|
| `/run` | Khá»Ÿi Ä‘á»™ng app | Environment detection, Port conflicts |
| `/test` | Kiá»ƒm tra logic | Auto-generate tests náº¿u thiáº¿u |
| `/deploy` | ÄÆ°a lÃªn production | SEO, Analytics, Legal, Backup, Monitoring |

### ğŸ”§ Báº£o trÃ¬
| Lá»‡nh | MÃ´ táº£ | Äiá»ƒm mÃ¹ Ä‘Æ°á»£c xá»­ lÃ½ |
|------|-------|-------------------|
| `/debug` | Sá»­a lá»—i (Investigation Protocol) | Giáº£ thuyáº¿t + 3 láº§n thá»­ max |
| `/refactor` | Dá»n dáº¹p code | Safe execution, Before/After comparison |
| `/audit` | Kiá»ƒm tra sá»©c khá»e | Security, Performance, Dependencies |
| `/rollback` | Quay vá» phiÃªn báº£n cÅ© | Emergency recovery |
| `/review` | **Tá»•ng quan dá»± Ã¡n** â­ NEW | BÃ n giao, Ä‘Ã¡nh giÃ¡, lÃªn káº¿ hoáº¡ch nÃ¢ng cáº¥p |

### ğŸŒ Háº¡ táº§ng
| Lá»‡nh | MÃ´ táº£ | Äiá»ƒm mÃ¹ Ä‘Æ°á»£c xá»­ lÃ½ |
|------|-------|-------------------|
| `/cloudflare-tunnel` | Expose app ra internet | Tunnel management |

---

## ğŸ”¥ ÄIá»‚M MÃ™ VIBE CODER ÄÃƒ ÄÆ¯á»¢C Xá»¬ LÃ TOÃ€N DIá»†N

### ğŸ“ Khi lÃªn káº¿ hoáº¡ch (`/plan`)
| Äiá»ƒm mÃ¹ | AI tá»± há»i |
|---------|-----------|
| Database Design | "CÃ³ dá»¯ liá»‡u sáºµn khÃ´ng? Quáº£n lÃ½ nhá»¯ng gÃ¬?" |
| Auth/Login | "Cáº§n Ä‘Äƒng nháº­p khÃ´ng? OAuth? Roles?" |
| File Upload | "CÃ³ upload hÃ¬nh khÃ´ng? Size limit?" |
| Email/Notifications | "Cáº§n gá»­i thÃ´ng bÃ¡o khÃ´ng?" |
| Payment | "CÃ³ nháº­n thanh toÃ¡n khÃ´ng?" |
| Search | "CÃ³ tÃ¬m kiáº¿m khÃ´ng? Fuzzy?" |
| Scheduled Tasks | "CÃ³ cáº§n tá»± Ä‘á»™ng cháº¡y hÃ ng ngÃ y?" |
| Charts/Graphs | "CÃ³ cáº§n biá»ƒu Ä‘á»“ khÃ´ng?" |
| PDF/Print | "CÃ³ cáº§n in hÃ³a Ä‘Æ¡n khÃ´ng?" |
| Maps | "CÃ³ cáº§n báº£n Ä‘á»“ khÃ´ng?" |
| Real-time | "CÃ³ cáº§n live updates khÃ´ng?" |

### ğŸ¨ Khi thiáº¿t káº¿ UI (`/visualize`)
| Äiá»ƒm mÃ¹ | AI tá»± xá»­ lÃ½ |
|---------|-------------|
| Loading States | Skeleton, Spinner, Progress bar |
| Error States | Toast, Modal, Inline error |
| Empty States | Illustration + Call-to-action |
| Accessibility | Color contrast, ARIA, Keyboard nav |
| Mobile | Responsive, Touch-friendly |
| Dark Mode | Dual theme design |

### ğŸš€ Khi deploy (`/deploy`)
| Äiá»ƒm mÃ¹ | AI tá»± xá»­ lÃ½ |
|---------|-------------|
| SEO | Meta tags, Sitemap, robots.txt |
| Analytics | Google Analytics / Plausible |
| Legal | Privacy Policy, Terms, Cookie consent |
| Backup | Database backup strategy |
| Monitoring | Uptime + Error tracking |
| SSL | Auto HTTPS |
| Maintenance | Maintenance mode page |

### ğŸ“š Khi lÆ°u trá»¯ (`/save-brain`)
| Äiá»ƒm mÃ¹ | AI tá»± táº¡o |
|---------|-----------|
| API Documentation | Auto-generate tá»« routes |
| Changelog | Version history |
| Business Rules | Quy táº¯c nghiá»‡p vá»¥ |
| **Structured Context** | `.brain/brain.json` â­ NEW |

---

## ğŸš€ AWF 2.0 - TÃNH NÄ‚NG Má»šI

### 1ï¸âƒ£ Deep Interview (3 CÃ¢u Há»i VÃ ng)
TrÆ°á»›c khi Ä‘á» xuáº¥t, AI há»i 3 cÃ¢u cá»‘t lÃµi:
- Quáº£n lÃ½ GÃŒ?
- AI dÃ¹ng?
- Äiá»u gÃ¬ QUAN TRá»ŒNG NHáº¤T?

â†’ GiÃºp AI hiá»ƒu Ä‘Ãºng tá»« Ä‘áº§u, trÃ¡nh lÃ m sai rá»“i sá»­a.

### 2ï¸âƒ£ Lazy Checkpoint (Tiáº¿t kiá»‡m tokens)
```
.brain/
â”œâ”€â”€ session.json        # Update má»—i PHASE (~450 tokens)
â””â”€â”€ session_log.txt     # Append má»—i TASK (~20 tokens)
```
â†’ Giáº£m 80% token overhead so vá»›i rewrite JSON má»—i task.

### 3ï¸âƒ£ Proactive Handover
Khi context > 80% Ä‘áº§y:
- AI tá»± táº¡o Handover Document
- LÆ°u vÃ o `.brain/handover.md`
- Session sau gÃµ `/recap` Ä‘á»ƒ resume ngay

â†’ KHÃ”NG BAO GIá»œ máº¥t context giá»¯a sessions.

### 4ï¸âƒ£ Step Confirmation Protocol
Sau má»—i milestone, hiá»ƒn thá»‹:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… ÄÃƒ XONG: [Task name]
ğŸ“Š Tiáº¿n Ä‘á»™: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â†’ Tiáº¿p? (y/Ä‘iá»u chá»‰nh/dá»«ng)
```
â†’ User luÃ´n biáº¿t Ä‘ang á»Ÿ Ä‘Ã¢u, khÃ´ng bá»‹ "máº¥t kiá»ƒm soÃ¡t".

### 5ï¸âƒ£ Agent Personas (BMAD-Inspired)
| Workflow | Persona | TÃ­nh cÃ¡ch |
|----------|---------|-----------|
| `/plan` | HÃ  (PM) | Láº¯ng nghe, Ä‘á» xuáº¥t options |
| `/design` | Minh (Architect) | Giáº£i thÃ­ch ká»¹ thuáº­t Ä‘Æ¡n giáº£n |
| `/code` | Tuáº¥n (Senior Dev) | Cáº©n tháº­n, kiá»ƒm tra ká»¹ |
| `/visualize` | Mai (UX Designer) | Visual, dÃ¹ng vÃ­ dá»¥ |
| `/debug` | Long (Detective) | Äiá»m tÄ©nh, cÃ³ phÆ°Æ¡ng phÃ¡p |
| `/audit` | Khang (BÃ¡c sÄ© Code) | KhÃ´ng gÃ¢y hoang mang |

---

## ğŸ§  Structured Context - v3.3 (TÃ¡ch brain + session)

### Váº¥n Ä‘á» v3.2
- `brain.json` chá»©a cáº£ static vÃ  dynamic data
- Má»—i láº§n save pháº£i update toÃ n bá»™ file
- Session state láº«n vá»›i project knowledge

### Giáº£i phÃ¡p v3.3: TÃ¡ch thÃ nh 2 files
```
.brain/                            # LOCAL (per-project)
â”œâ”€â”€ brain.json                     # ğŸ§  Static knowledge (Ã­t thay Ä‘á»•i)
â”œâ”€â”€ session.json                   # ğŸ“ Dynamic session (thay Ä‘á»•i liÃªn tá»¥c)
â””â”€â”€ preferences.json               # âš™ï¸ Local override (náº¿u khÃ¡c global)

~/.antigravity/                    # GLOBAL (táº¥t cáº£ dá»± Ã¡n)
â”œâ”€â”€ preferences.json               # Default AI preferences
â””â”€â”€ defaults/                      # Templates
```

### Lá»£i Ã­ch
| Metric | v3.2 | v3.3 |
|--------|------|------|
| Files Ä‘á»ƒ scan | 1 (brain.json) | 2 (brain + session) |
| Token usage | ~3KB | ~3KB (tÆ°Æ¡ng Ä‘Æ°Æ¡ng) |
| Update frequency | Má»—i láº§n save | brain: khi project thay Ä‘á»•i, session: liÃªn tá»¥c |
| Scope | Local only | Local + Global preferences |

### Workflow
```
/save-brain â†’ Update brain.json (náº¿u cáº§n) + session.json (luÃ´n)
/recap â†’ Load preferences â†’ brain.json â†’ session.json â†’ Summary
/customize â†’ Save preferences (local/global/cáº£ hai)
```

### Schema files
- `schemas/brain.schema.json` - Project knowledge
- `schemas/session.schema.json` - Session state â­ NEW
- `schemas/preferences.schema.json` - User preferences â­ NEW

### Template files
- `templates/brain.example.json`
- `templates/session.example.json` â­ NEW
- `templates/preferences.example.json` â­ NEW

### brain.json (Static - Ã­t thay Ä‘á»•i)
- `project`: TÃªn, loáº¡i, status
- `tech_stack`: Frontend, Backend, DB, Dependencies
- `database_schema`: Tables, Relationships
- `api_endpoints`: Routes vá»›i auth info
- `business_rules`: Quy táº¯c nghiá»‡p vá»¥
- `features`: TÃ­nh nÄƒng vÃ  tráº¡ng thÃ¡i
- `knowledge_items`: Patterns, Gotchas, Conventions

### session.json (Dynamic - thay Ä‘á»•i liÃªn tá»¥c) â­ NEW
- `working_on`: Feature, task, status, files Ä‘ang sá»­a
- `pending_tasks`: Viá»‡c cáº§n lÃ m tiáº¿p
- `recent_changes`: Thay Ä‘á»•i gáº§n Ä‘Ã¢y
- `errors_encountered`: Lá»—i gáº·p vÃ  cÃ¡ch fix
- `decisions_made`: Quyáº¿t Ä‘á»‹nh Ä‘Ã£ láº¥y trong session

### preferences.json (User settings) â­ NEW
- `communication`: Tone, persona
- `technical`: Detail level, autonomy, quality
- `working_style`: Pace, feedback style
- `custom_rules`: Quy táº¯c riÃªng cá»§a user

---

## ğŸ›¡ï¸ Resilience Patterns - v3.3 (áº¨n khá»i User)

> **NguyÃªn táº¯c:** User khÃ´ng cáº§n biáº¿t vá» retry, timeout, fallback. AI xá»­ lÃ½ ngáº§m.

### Auto-Retry (áº¨n)
```
Khi gáº·p lá»—i transient (network, rate limit):
1. Retry láº§n 1 (Ä‘á»£i 1s)
2. Retry láº§n 2 (Ä‘á»£i 2s)
3. Retry láº§n 3 (Ä‘á»£i 4s)
4. Náº¿u váº«n fail â†’ BÃ¡o user báº±ng tiáº¿ng Ä‘Æ¡n giáº£n
```

### Timeout Protection (áº¨n)
```
Má»—i task cÃ³ timeout máº·c Ä‘á»‹nh:
- /code: 5 phÃºt
- /deploy: 10 phÃºt
- /debug: 5 phÃºt
- KhÃ¡c: 3 phÃºt

Khi timeout â†’ "Viá»‡c nÃ y Ä‘ang lÃ¢u quÃ¡, anh muá»‘n tiáº¿p tá»¥c khÃ´ng?"
```

### Fallback Conversation (Hiá»ƒn thá»‹ khi cáº§n)
```
Thay vÃ¬ syntax phá»©c táº¡p nhÆ°: /deploy production || staging

AI há»i báº±ng tiáº¿ng Viá»‡t:
"Deploy lÃªn production khÃ´ng Ä‘Æ°á»£c ğŸ˜…
 Anh muá»‘n thá»­ staging trÆ°á»›c khÃ´ng?
 1ï¸âƒ£ CÃ³ - Deploy staging
 2ï¸âƒ£ KhÃ´ng - Em xem láº¡i lá»—i"
```

### Error Messages (ÄÆ¡n giáº£n hÃ³a)
```
âŒ CÅ©: "Error: ECONNREFUSED 127.0.0.1:5432 - Connection refused"

âœ… Má»›i: "KhÃ´ng káº¿t ná»‘i Ä‘Æ°á»£c database ğŸ˜…
        Anh kiá»ƒm tra xem PostgreSQL Ä‘ang cháº¡y chÆ°a nhÃ©!
        GÃµ /debug náº¿u cáº§n em há»— trá»£."
```

### Error Categories
| Loáº¡i lá»—i | AI xá»­ lÃ½ | User tháº¥y |
|----------|----------|-----------|
| Network timeout | Auto-retry 3x | KhÃ´ng tháº¥y gÃ¬ (náº¿u thÃ nh cÃ´ng) |
| Rate limit | Äá»£i vÃ  retry | "Äang chá» API..." |
| Auth failed | BÃ¡o ngay | "Cáº§n kiá»ƒm tra láº¡i credentials" |
| Code syntax | Gá»£i Ã½ fix | "CÃ³ lá»—i á»Ÿ file X, gÃµ /debug" |
| Build failed | PhÃ¢n tÃ­ch log | "Build lá»—i vÃ¬ Y, em Ä‘á» xuáº¥t..." |

---

## ğŸ® Luá»“ng lÃ m viá»‡c khuyáº¿n nghá»‹

### ğŸ“¦ Dá»± Ã¡n má»›i
```
/init â†’ /plan â†’ /visualize â†’ /code â†’ /run â†’ /test â†’ /deploy â†’ /save-brain
```

### ğŸŒ… Báº¯t Ä‘áº§u ngÃ y má»›i
```
/recap â†’ /code â†’ /run â†’ /test â†’ /save-brain
```

### ğŸ› Khi gáº·p lá»—i
```
/debug â†’ /test â†’ (náº¿u loáº¡n) /rollback
```

### ğŸš€ TrÆ°á»›c release
```
/audit â†’ /test â†’ /deploy â†’ /save-brain
```

---

## ğŸ“Š Thá»‘ng kÃª há»‡ thá»‘ng v3.4

| Workflow | Size | Cháº¥t lÆ°á»£ng |
|----------|------|------------|
| `/plan` | **5.4KB** | â­â­â­â­â­ Ultimate |
| `/deploy` | **5.3KB** | â­â­â­â­â­ Ultimate |
| `/init` | 4.9KB | â­â­â­â­â­ Complete |
| `/visualize` | 4.8KB | â­â­â­â­â­ Complete |
| `/debug` | 4.7KB | â­â­â­â­â­ Complete |
| `/cloudflare-tunnel` | 4.3KB | â­â­â­â­ Good |
| `/save-brain` | **4.2KB** | â­â­â­â­â­ Ultimate |
| `/audit` | 4.2KB | â­â­â­â­â­ Complete |
| `/refactor` | 4.2KB | â­â­â­â­â­ Complete |
| `/code` | 3.6KB | â­â­â­â­â­ Complete |
| `/run` | 2.6KB | â­â­â­â­ Good |
| `/test` | 2.4KB | â­â­â­â­ Good |
| `/recap` | 2.4KB | â­â­â­â­ Good |
| `/rollback` | 2.2KB | â­â­â­â­ Good |

**Tá»•ng:** 14 workflows | **~60KB** instructions | **50+ Ä‘iá»ƒm mÃ¹** Ä‘Æ°á»£c xá»­ lÃ½

---

## ğŸ’¡ Tips cho Vibe Coder

1. **Cá»© nÃ³i tá»± nhiÃªn** - AI sáº½ há»i láº¡i náº¿u thiáº¿u
2. **KhÃ´ng sá»£ lÃ m sai** - CÃ³ `/rollback`
3. **Cuá»‘i ngÃ y `/save-brain`** - Mai khÃ´ng máº¥t context
4. **Äá»‹nh ká»³ `/audit`** - PhÃ²ng bá»‡nh hÆ¡n chá»¯a bá»‡nh
5. **TrÆ°á»›c release `/deploy`** - SEO, Analytics, Legal Ä‘áº§y Ä‘á»§

---

*Antigravity Vibe Coding Suite v3.4 - Your dreams, our engineering.*
